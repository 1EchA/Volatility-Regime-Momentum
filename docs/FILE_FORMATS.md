# ğŸ“‹ æ–‡ä»¶æ ¼å¼è§„èŒƒ

> Aè‚¡é‡åŒ–ç­–ç•¥ç ”ç©¶å¹³å°æ•°æ®æ–‡ä»¶æ ¼å¼æ ‡å‡†

## ğŸ“Š æ•°æ®æ–‡ä»¶ç±»å‹æ€»è§ˆ

æœ¬å¹³å°å¤„ç†ä»¥ä¸‹å‡ ç±»æ•°æ®æ–‡ä»¶ï¼Œæ¯ç§éƒ½æœ‰ä¸¥æ ¼çš„æ ¼å¼è¦æ±‚ï¼š

### 1ï¸âƒ£ **è‚¡ç¥¨ä»·æ ¼æ•°æ®** (Individual Stock CSV)
### 2ï¸âƒ£ **é¢„æµ‹ç»“æœæ–‡ä»¶** (Predictions CSV)
### 3ï¸âƒ£ **æ³¢åŠ¨ç‡åˆ¶åº¦æ•°æ®** (Volatility Regime CSV)
### 4ï¸âƒ£ **ç­–ç•¥æ‰§è¡Œç»“æœ** (Strategy Performance CSV)
### 5ï¸âƒ£ **å‚æ•°ç½‘æ ¼ç»“æœ** (Parameter Grid CSV)
### 6ï¸âƒ£ **å› å­æ•°æ®** (Factor Data CSV)
### 7ï¸âƒ£ **è‚¡ç¥¨æ± ä¿¡æ¯** (Stock Universe CSV)

---

## ğŸ“ˆ 1. è‚¡ç¥¨ä»·æ ¼æ•°æ®æ ¼å¼

**æ–‡ä»¶å‘½å**: `{6ä½è‚¡ç¥¨ä»£ç }.csv` (å¦‚: `000001.csv`, `600519.csv`)
**å­˜æ”¾ç›®å½•**: `data/`
**ç¼–ç æ ¼å¼**: UTF-8

### ğŸ”§ å¿…éœ€åˆ— (Required Columns)
```csv
date,open,high,low,close,volume,amount,è‚¡ç¥¨ä»£ç ,è‚¡ç¥¨åç§°
2020-01-02,11.85,11.94,11.83,11.92,486384,579736640.0,000001,å¹³å®‰é“¶è¡Œ
2020-01-03,11.90,12.05,11.88,12.02,712484,854442752.0,000001,å¹³å®‰é“¶è¡Œ
```

| åˆ—å | æ•°æ®ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|---------|------|------|
| `date` | String/Date | äº¤æ˜“æ—¥æœŸ (YYYY-MM-DD) | `2020-01-02` |
| `open` | Float | å¼€ç›˜ä»· | `11.85` |
| `high` | Float | æœ€é«˜ä»· | `11.94` |
| `low` | Float | æœ€ä½ä»· | `11.83` |
| `close` | Float | æ”¶ç›˜ä»· | `11.92` |
| `volume` | Integer | æˆäº¤é‡(è‚¡) | `486384` |
| `amount` | Float | æˆäº¤é¢(å…ƒ) | `579736640.0` |
| `è‚¡ç¥¨ä»£ç ` | String | 6ä½è‚¡ç¥¨ä»£ç  | `000001` |
| `è‚¡ç¥¨åç§°` | String | è‚¡ç¥¨ä¸­æ–‡åç§° | `å¹³å®‰é“¶è¡Œ` |

### âš ï¸ æ³¨æ„äº‹é¡¹
- æ—¥æœŸå¿…é¡»è¿ç»­ï¼Œç¼ºå¤±äº¤æ˜“æ—¥ä¼šå½±å“è®¡ç®—
- ä»·æ ¼æ•°æ®å»ºè®®ä½¿ç”¨å‰å¤æƒä»·æ ¼
- æˆäº¤é‡/æˆäº¤é¢ç”¨äºè®¡ç®—æµåŠ¨æ€§æŒ‡æ ‡

---

## ğŸ¯ 2. é¢„æµ‹ç»“æœæ–‡ä»¶æ ¼å¼

**æ–‡ä»¶å‘½å**: `predictions_{YYYYMMDD}_{HHMMSS}.csv`
**å­˜æ”¾ç›®å½•**: `data/`
**æ–‡ä»¶å¤§å°**: é€šå¸¸50-100MB+

### ğŸ”§ å¿…éœ€åˆ—
```csv
date,stock_code,y_pred,y_true,regime,industry
2020-01-02,000001,0.0234,-0.0156,æ­£å¸¸,é“¶è¡Œ
2020-01-02,000002,0.0145,0.0089,æ­£å¸¸,æˆ¿åœ°äº§
```

| åˆ—å | æ•°æ®ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|---------|------|------|
| `date` | String/Date | é¢„æµ‹æ—¥æœŸ | `2020-01-02` |
| `stock_code` | String | 6ä½è‚¡ç¥¨ä»£ç (è¡¥é½å‰å¯¼0) | `000001` |
| `y_pred` | Float | é¢„æµ‹æ”¶ç›Šç‡ | `0.0234` |
| `y_true` | Float | å®é™…æ”¶ç›Šç‡ | `-0.0156` |
| `regime` | String | æ³¢åŠ¨ç‡åˆ¶åº¦ | `æ­£å¸¸`/`é«˜æ³¢åŠ¨`/`æé«˜æ³¢åŠ¨` |
| `industry` | String | è¡Œä¸šåˆ†ç±»(å¯é€‰) | `é“¶è¡Œ` |

### ğŸ“Š æ€§èƒ½ä¼˜åŒ–
- æ–‡ä»¶æŒ‰æ—¥æœŸæ’åºæé«˜è¯»å–æ•ˆç‡
- æ”¯æŒåˆ†å—è¯»å–(chunksize=300000)
- è‚¡ç¥¨ä»£ç ç»Ÿä¸€6ä½æ ¼å¼(å‰å¯¼é›¶è¡¥é½)

---

## ğŸ“Š 3. æ³¢åŠ¨ç‡åˆ¶åº¦æ•°æ®æ ¼å¼

**æ–‡ä»¶å‘½å**: `volatility_regime_data_{YYYYMMDD}_{HHMMSS}.csv`
**å­˜æ”¾ç›®å½•**: `data/`

### ğŸ”§ å¿…éœ€åˆ—
```csv
date,stock_code,returns,volatility,regime,regime_prob
2020-01-02,000001,-0.0156,0.0234,æ­£å¸¸,0.85
2020-01-02,000002,0.0089,0.0145,é«˜æ³¢åŠ¨,0.72
```

| åˆ—å | æ•°æ®ç±»å‹ | è¯´æ˜ |
|-----|---------|------|
| `date` | Date | æ—¥æœŸ |
| `stock_code` | String | è‚¡ç¥¨ä»£ç  |
| `returns` | Float | æ—¥æ”¶ç›Šç‡ |
| `volatility` | Float | æ³¢åŠ¨ç‡ä¼°è®¡å€¼ |
| `regime` | String | åˆ¶åº¦åˆ†ç±» |
| `regime_prob` | Float | åˆ¶åº¦æ¦‚ç‡(0-1) |

---

## âš™ï¸ 4. ç­–ç•¥æ‰§è¡Œç»“æœæ ¼å¼

**æ–‡ä»¶å‘½å**: `performance_report_{YYYYMMDD}_{HHMMSS}_timeseries.csv`

### ğŸ”§ æ ¸å¿ƒåˆ—
```csv
date,long_ret,short_ret,ls_ret,cumulative_ret,drawdown,turnover
2020-01-02,0.0123,-0.0089,0.0212,0.0212,0.0,0.23
2020-01-03,0.0156,-0.0034,0.0190,0.0406,-0.01,0.18
```

| åˆ—å | æ•°æ®ç±»å‹ | è¯´æ˜ |
|-----|---------|------|
| `date` | Date | æ—¥æœŸ |
| `long_ret` | Float | å¤šå¤´æ”¶ç›Šç‡ |
| `short_ret` | Float | ç©ºå¤´æ”¶ç›Šç‡ |
| `ls_ret` | Float | å¤šç©ºæ”¶ç›Šç‡ |
| `cumulative_ret` | Float | ç´¯ç§¯æ”¶ç›Šç‡ |
| `drawdown` | Float | å›æ’¤ |
| `turnover` | Float | æ¢æ‰‹ç‡ |

---

## ğŸ” 5. å‚æ•°ç½‘æ ¼ç»“æœæ ¼å¼

**æ–‡ä»¶å‘½å**: `turnover_strategy_grid_{YYYYMMDD}_{HHMMSS}.csv`

### ğŸ”§ æ ¸å¿ƒåˆ—
```csv
strategy,param,param_name,ema_span,delta,top_n,bottom_n,cost_bps,n_days,ic_mean,ic_ir,ls_mean,ls_ann,ls_ir,max_drawdown,avg_turnover
E_combo,3_12,ema_span_delta,3,12,35,35,0.0003,515,0.0115,0.0577,0.0001,0.0158,0.0887,-0.1922,0.2438
```

| åˆ—å | æ•°æ®ç±»å‹ | è¯´æ˜ |
|-----|---------|------|
| `strategy` | String | ç­–ç•¥åç§° |
| `top_n` | Integer | åšå¤šè‚¡ç¥¨æ•°é‡ |
| `bottom_n` | Integer | åšç©ºè‚¡ç¥¨æ•°é‡ |
| `cost_bps` | Float | äº¤æ˜“æˆæœ¬(åŸºç‚¹) |
| `ic_mean` | Float | å¹³å‡IC |
| `ic_ir` | Float | ä¿¡æ¯æ¯”ç‡ |
| `ls_ir` | Float | å¤šç©ºä¿¡æ¯æ¯”ç‡ |
| `max_drawdown` | Float | æœ€å¤§å›æ’¤ |
| `avg_turnover` | Float | å¹³å‡æ¢æ‰‹ç‡ |

---

## ğŸ“Š 6. å› å­æ•°æ®æ ¼å¼

**æ–‡ä»¶å‘½å**: `factors_data_redesigned.csv`

### ğŸ”§ åŸºç¡€åˆ—
```csv
date,stock_code,ret_1d,ret_5d,volatility_20d,momentum_12d,rsi_14d
2020-01-02,000001,-0.0156,0.0234,0.0189,0.0456,0.45
```

**å› å­åˆ†ç±»**:
- **æ”¶ç›Šç‡ç±»**: `ret_1d`, `ret_5d`, `ret_20d`
- **åŠ¨é‡ç±»**: `momentum_12d`, `momentum_60d`
- **æŠ€æœ¯æŒ‡æ ‡**: `rsi_14d`, `macd_signal`
- **æ³¢åŠ¨ç‡ç±»**: `volatility_20d`, `volatility_60d`

---

## ğŸ“‹ 7. è‚¡ç¥¨æ± ä¿¡æ¯æ ¼å¼

**æ–‡ä»¶å**: `stock_universe.csv`
**ä½ç½®**: é¡¹ç›®æ ¹ç›®å½•

### ğŸ”§ å¿…éœ€åˆ—
```csv
code,name,å¸‚å€¼æ’å,æ€»å¸‚å€¼_äº¿å…ƒ,æµé€šå¸‚å€¼_äº¿å…ƒ,å¸‚ç›ˆç‡-åŠ¨æ€,å¸‚å‡€ç‡,è¡Œä¸š,æ ·æœ¬æ ‡è¯†,æ›´æ–°æ—¶é—´
601138,å·¥ä¸šå¯Œè”,1,12157.97,12157.18,50.18,8.02,æœªåˆ†ç±»,æ‰©å±•500åª,2025-09-12 10:45:33
```

| åˆ—å | æ•°æ®ç±»å‹ | è¯´æ˜ |
|-----|---------|------|
| `code` | String | 6ä½è‚¡ç¥¨ä»£ç  |
| `name` | String | è‚¡ç¥¨åç§° |
| `å¸‚å€¼æ’å` | Integer | å¸‚å€¼æ’å |
| `è¡Œä¸š` | String | è¡Œä¸šåˆ†ç±» |

---

## ğŸ”§ æ–‡ä»¶å¤„ç†æœ€ä½³å®è·µ

### ğŸ“ æ–‡ä»¶ç»„ç»‡
```
data/
â”œâ”€â”€ 000001.csv              # è‚¡ç¥¨ä»·æ ¼
â”œâ”€â”€ 000002.csv
â”œâ”€â”€ ...
â”œâ”€â”€ predictions_latest.csv   # æœ€æ–°é¢„æµ‹ç»“æœ
â”œâ”€â”€ volatility_regime_data_latest.csv
â””â”€â”€ archive/                # å†å²æ–‡ä»¶å½’æ¡£
    â”œâ”€â”€ old_predictions/
    â””â”€â”€ old_results/
```

### ğŸ”„ æ•°æ®æ›´æ–°æµç¨‹
1. **å¢é‡æ›´æ–°**: æ–°æ•°æ®è¿½åŠ åˆ°ç°æœ‰æ–‡ä»¶
2. **å…¨é‡æ›¿æ¢**: é‡æ–°ç”Ÿæˆå®Œæ•´æ•°æ®æ–‡ä»¶
3. **æ–‡ä»¶å½’æ¡£**: å®šæœŸå°†æ—§æ–‡ä»¶ç§»è‡³archiveç›®å½•
4. **ç¼“å­˜æ¸…ç†**: æ•°æ®æ›´æ–°åæ¸…é™¤ç›¸å…³ç¼“å­˜

### âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®
- **åˆ†å—è¯»å–**: å¤§æ–‡ä»¶ä½¿ç”¨pandas chunksizeå‚æ•°
- **æ•°æ®ç±»å‹ä¼˜åŒ–**: åˆç†è®¾ç½®dtypeå‡å°‘å†…å­˜å ç”¨
- **ç´¢å¼•ä¼˜åŒ–**: å¯¹é¢‘ç¹æŸ¥è¯¢çš„åˆ—å»ºç«‹ç´¢å¼•
- **å‹ç¼©å­˜å‚¨**: è€ƒè™‘ä½¿ç”¨parquetæ ¼å¼æ›¿ä»£CSV

### â— å¸¸è§é”™è¯¯é¿å…
- **ç¼–ç é—®é¢˜**: ç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç 
- **æ—¥æœŸæ ¼å¼**: ç»Ÿä¸€ä½¿ç”¨YYYY-MM-DDæ ¼å¼
- **ç¼ºå¤±å€¼**: æ˜ç¡®ç¼ºå¤±å€¼çš„è¡¨ç¤ºæ–¹å¼(NaN/NULL)
- **æ•°æ®ç±»å‹**: ç¡®ä¿æ•°å€¼åˆ—ä¸åŒ…å«å­—ç¬¦ä¸²
- **æ–‡ä»¶å¤§å°**: ç›‘æ§æ–‡ä»¶å¤§å°ï¼ŒåŠæ—¶åˆ†å‰²æˆ–å‹ç¼©

---

## ğŸ› ï¸ éªŒè¯å·¥å…·

å¹³å°æä¾›ä»¥ä¸‹éªŒè¯åŠŸèƒ½ç¡®ä¿æ•°æ®è´¨é‡:

### ğŸ“Š è‡ªåŠ¨éªŒè¯
- æ–‡ä»¶æ ¼å¼æ£€æŸ¥
- å¿…éœ€åˆ—éªŒè¯
- æ•°æ®ç±»å‹æ ¡éªŒ
- ç¼ºå¤±å€¼æ£€æµ‹

### ğŸ” æ‰‹åŠ¨éªŒè¯
- æ•°æ®ç»Ÿè®¡æ‘˜è¦
- å¼‚å¸¸å€¼è¯†åˆ«
- æ—¶é—´åºåˆ—è¿ç»­æ€§æ£€æŸ¥
- è·¨æ–‡ä»¶ä¸€è‡´æ€§éªŒè¯

ä½¿ç”¨è¿™äº›æ ‡å‡†æ ¼å¼å¯ä»¥ç¡®ä¿å¹³å°çš„æ­£å¸¸è¿è¡Œå’Œæœ€ä½³æ€§èƒ½è¡¨ç°ã€‚